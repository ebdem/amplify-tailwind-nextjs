_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[17],{"7Ky4":function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/edit-post/[id]",function(){return n("IzYP")}])},E1HW:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return i}));var r="\n  query GetPost($id: ID!) {\n    getPost(id: $id) {\n      id\n      name\n      description\n      username\n      coverImage\n      createdAt\n      updatedAt\n    }\n  }\n",a="\n  query ListPosts(\n    $filter: ModelPostFilterInput\n    $limit: Int\n    $nextToken: String\n  ) {\n    listPosts(filter: $filter, limit: $limit, nextToken: $nextToken) {\n      items {\n        id\n        name\n        description\n        username\n        coverImage\n        createdAt\n        updatedAt\n      }\n      nextToken\n    }\n  }\n",i="\n  query PostedByUsername(\n    $username: String\n    $sortDirection: ModelSortDirection\n    $filter: ModelPostFilterInput\n    $limit: Int\n    $nextToken: String\n  ) {\n    postedByUsername(\n      username: $username\n      sortDirection: $sortDirection\n      filter: $filter\n      limit: $limit\n      nextToken: $nextToken\n    ) {\n      items {\n        id\n        name\n        description\n        username\n        coverImage\n        createdAt\n        updatedAt\n      }\n      nextToken\n    }\n  }\n"},IzYP:function(e,t,n){"use strict";n.r(t);var r=n("nKUr"),a=n("rePB"),i=n("o0o1"),o=n.n(i),c=n("HaE+"),s=n("q1tI"),u=n("oDCQ"),l=n("l1VB"),p=n("20a2"),d=n("k20a"),f=n.n(d),b=(n("FQ0y"),n("7Cbv")),m=n("sIIE"),O=n("E1HW");function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){Object(a.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.default=function(){var e=Object(s.useState)(null),t=e[0],n=e[1],i=Object(p.useRouter)(),d=i.query.id,g=Object(s.useState)(null),y=g[0],h=g[1],x=Object(s.useState)(null),v=x[0],w=x[1],P=Object(s.useRef)(null);if(Object(s.useEffect)((function(){function e(){return(e=Object(c.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(d){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,u.a.graphql({query:O.a,variables:{id:d}});case 4:t=e.sent,console.log("postData: ",t),n(t.data.getPost),t.data.getPost.coverImage&&k(t.data.getPost.coverImage);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[d]),!t)return null;function k(e){return I.apply(this,arguments)}function I(){return(I=Object(c.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.a.get(t);case 2:n=e.sent,h(n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $(){return($=Object(c.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:P.current.click();case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var _=t.name,E=t.description;function N(){return(N=Object(c.a)(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(_&&E){e.next=2;break}return e.abrupt("return");case 2:if(t={id:d,name:_,description:E},!y||!v){e.next=8;break}return n="".concat(y.name,"_").concat(Object(b.a)()),t.coverImage=n,e.next=8,l.a.put(n,y);case 8:return e.next=10,u.a.graphql({query:m.c,variables:{input:t},authMode:"AMAZON_COGNITO_USER_POOLS"});case 10:console.log("post successfully updated!"),i.push("/my-posts");case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(r.jsxs)("div",{children:[Object(r.jsx)("h1",{className:"text-3xl font-semibold tracking-wide mt-6 mb-2",children:"Edit post"}),Object(r.jsx)("input",{onChange:function(e){n((function(){return j(j({},t),{},Object(a.a)({},e.target.name,e.target.value))}))},name:"name",placeholder:"Title",value:t.name,className:"border-b pb-2 text-lg my-4 focus:outline-none w-full font-light text-gray-500 placeholder-gray-500 y-2"}),y&&Object(r.jsx)("img",{src:v||y,className:"mt-4"}),Object(r.jsx)(f.a,{value:t.description,onChange:function(e){return n(j(j({},t),{},{description:e}))}}),Object(r.jsx)("input",{type:"file",ref:P,className:"absolute w-0 h-0",onChange:function(e){var t=e.target.files[0];t&&(h(t),w(URL.createObjectURL(t)))}}),Object(r.jsx)("button",{className:"bg-purple-600 text-white font-semibold px-8 py-2 rounded-lg mr-2",onClick:function(){return $.apply(this,arguments)},children:"Upload Cover Image"}),Object(r.jsx)("button",{className:"mb-4 bg-blue-600 text-white font-semibold px-8 py-2 rounded-lg",onClick:function(){return N.apply(this,arguments)},children:"Update Post"})]})}}},[["7Ky4",1,3,2,4,12,0,5,6,7,8,9,11]]]);